<div class="dashboard-container">
    <div class="header">
        <h1>Galeria de Jogos</h1>
        <button mat-raised-button color="primary" routerLink="/create">
            <mat-icon>add</mat-icon> Novo Jogo
        </button>
    </div>

    <div class="filters">
        <mat-form-field appearance="outline">
            <mat-label>Buscar por nome</mat-label>
            <input matInput [(ngModel)]="searchQuery" (keyup.enter)="applyFilter()" placeholder="Ex: God of War">
            <button mat-icon-button matSuffix (click)="applyFilter()">
                <mat-icon>search</mat-icon>
            </button>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Categoria</mat-label>
            <mat-select [(ngModel)]="selectedCategory" (selectionChange)="applyFilter()">
                <mat-option value="">Todas</mat-option>
                <mat-option value="Ação/Aventura">Ação/Aventura</mat-option>
                <mat-option value="RPG">RPG</mat-option>
                <mat-option value="Esportes">Esportes</mat-option>
                <mat-option value="FPS">FPS</mat-option>
                <mat-option value="RPG/Futurista">RPG/Futurista</mat-option>
                <mat-option value="Ação/Sobrevivência">Ação/Sobrevivência</mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <div class="games-grid" *ngIf="dataSource.data.length > 0; else noData">
        <mat-card class="game-card" *ngFor="let product of dataSource.data">
            <div class="game-image-container">
                <img [src]="product.image" [alt]="product.name" class="game-image">
                <div class="game-price">{{product.price | currency:'BRL'}}</div>
            </div>
            <mat-card-content>
                <div class="game-category">{{product.category}}</div>
                <h3 class="game-title">{{product.name}}</h3>
                <p class="game-description">{{product.description}}</p>
            </mat-card-content>
            <mat-card-actions align="end">
                <button mat-icon-button color="primary" [routerLink]="['/edit', product.id]" matTooltip="Editar">
                    <mat-icon>edit</mat-icon>
                </button>
                <button mat-icon-button color="warn" (click)="deleteProduct(product)" matTooltip="Excluir">
                    <mat-icon>delete</mat-icon>
                </button>
            </mat-card-actions>
        </mat-card>
    </div>

    <ng-template #noData>
        <div class="no-data">
            <mat-icon>videogame_asset_off</mat-icon>
            <p>Nenhum jogo encontrado.</p>
        </div>
    </ng-template>

    <mat-paginator [length]="totalProducts" [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 25, 100]"
        (page)="onPageChange($event)" aria-label="Select page of products">
    </mat-paginator>
</div>